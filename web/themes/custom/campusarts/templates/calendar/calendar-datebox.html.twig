{#
/**
 * @file
 * Template to display the date box in a calendar.
 *
 * Available variables:
 * - view: The view.
 * - granularity: The type of calendar this box is in -- year, month, day, or week.
 * - mini: Whether or not this is a mini calendar.
 * - class: The class for this box -- mini-on, mini-off, or day.
 * - day:  The day of the month.
 * - date: The current date, in the form YYYY-MM-DD.
 * - link: A formatted link to the calendar day view for this day.
 * - url:  The url to the calendar day view for this day.
 * - selected: Whether or not this day has any items.
 * - items: An array of items for this day.
 *
 * @ingroup themeable
 */
#}

<div class="{{ granularity }} {{ class }}">
  {% if selected is empty and not items[date] %}
    <span>{{ day }}</span>
  {% else %}
    <span class="featured">{{ day }}</span>
    {% if items is not empty %}
      <div class="event-list">
        <a href="" class="calendar-popover-launcher" data-toggle="popover" data-html="true" data-placement="bottom"
        data-template="
          <div class='popover calendar-popover' role='popover'>
            <div class='popover-content'>
            </div>
          </div>"
        data-content="
            <div class='close-pop'><a>&times;</a></div>
            {% set events_day = items[date] %}
            {% for i, event_time in events_day %}
              {% for j, event in event_time  %}
                {% set vars = { 'event': event.entity } %}
                <a class='title' href='{{ path('entity.node.canonical', {'node': vars.event.id }) }}'>{{ vars.event.title.value }}</a>
              {% endfor %}
            {% endfor %}
        ">
        </a>
      </div>
    {% endif %}
  {% endif %}
</div>

{# original #}
{# <div class="{{ granularity }} {{ class }}">
  {% if selected is empty and not items[date] %}
    <span>{{ day }}</span>
  {% else %}
    <span class="featured">{{ day }}</span>
    {% if items is not empty %}
      <div class="event-list">
        {% set events_day = items[date] %}
        {% for i, event_time in events_day %}
          {% for j, event in event_time  %}
            {% set vars = { 'event': event.entity } %}
            {% include '@ltu/includes/calendar-popover.html.twig' with vars %}
          {% endfor %}
        {% endfor %}
      </div>
    {% endif %}
  {% endif %}
</div> #}



